<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Robot+Mono&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/qweather-icons@1.3.1/font/qweather-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link href="./build.css?v2" rel="stylesheet" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.2/mqttws31.min.js"
      type="text/javascript"
    ></script>
    <!-- echarts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="./js/forecast.js?v1.01"></script>
    <script src="./js/liveUpdates.js?v1.05"></script>
    <script src="./js/checkdiff.js?v2"></script>

    <!-- Umami -->
    <script
      async
      src="https://analytics.umami.is/script.js"
      data-website-id="2e66cfde-2766-46b3-9883-193bcb330af9"
    ></script>

    <!-- Mqtt status animation -->
    <style>
      div.online-indicator {
        display: inline-block;
        width: 15px;
        height: 15px;
        margin-right: 10px;

        background-color: rgb(239 68 68);
        border-radius: 50%;

        position: relative;
      }
      span.blink {
        display: block;
        width: 15px;
        height: 15px;

        background-color: (239 68 68);
        opacity: 0.7;
        border-radius: 50%;
      }

      .animate {
        animation: blink 1s linear;
      }

      /*Animations*/

      @keyframes blink {
        100% {
          transform: scale(2, 2);
          opacity: 0;
        }
      }

      /* tooltip */
      .tooltip-text {
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.3s, margin-bottom 0.3s;
      }

      .tw:group:hover .tooltip-text,
      .tw:group:focus .tooltip-text {
        visibility: visible;
        opacity: 1;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body class="tw:bg-weather-bg">
    <!-- Header -->
    <div id="header" class="tw:px-8 tw:pt-6 tw:bg-weather-cool/80">
      <div
        class="tw:lg:max-w-[75%] tw:mx-auto tw:text-left tw:relative tw:z-10 tw:text-white"
      >
        <div class="tw:flex tw:items-center tw:gap-3 tw:mb-2">
          <a href="/">
            <h1 class="tw:text-4xl tw:font-semibold tw:tracking-tight">
              $station.location
            </h1>
          </a>
        </div>

        <div
          class="tw:flex tw:items-center tw:gap-5 tw:mb-2 tw:text-sm tw:text-white/85 tw:font-medium"
        >
          <div class="tw:flex tw:items-center tw:gap-1.5">
            <svg
              class="tw:w-3.5 tw:h-3.5 tw:opacity-70"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
              <circle cx="12" cy="10" r="3" />
            </svg>
            <span class="tw:font-mono"
              >$station.latitude[0]°$station.latitude[1]'$station.latitude[2],
              $station.longitude[0]°$station.longitude[1]'$station.longitude[2]</span
            >
          </div>
          <div class="tw:flex tw:items-center tw:gap-1.5">
            <svg
              class="tw:w-3.5 tw:h-3.5 tw:opacity-70"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="17,10 12,15 7,10" />
              <polyline points="19,15 12,22 5,15" />
            </svg>
            <span class="tw:font-mono">$station.altitude</span>
          </div>
        </div>

        <p class="tw:text-base tw:text-white/90 tw:font-medium tw:mb-4">
          Ultimo aggiornamento:
          <span class="tw:font-mono"
            >$current.dateTime $current.dateTime.format("%Z")</span
          >
        </p>

        <div
          class="tw:flex tw:items-end tw:justify-between tw:flex-wrap tw:gap-4"
        >
          <!-- PC menu -->
          <nav class="tw:flex-1">
            <div class="tw:hidden tw:md:flex tw:flex-row tw:gap-1">
              <a
                href="index.html"
                class="tw:px-3 tw:py-2 tw:text-white tw:text-lg tw:font-medium tw:border-b-2 tw:border-white/80 tw:transition-colors hover:tw:bg-white/10 tw:rounded-t-md"
                >Oggi</a
              >
              <a
                href="week.html"
                class="tw:px-3 tw:py-2 tw:text-white/80 tw:text-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10 tw:rounded-t-md"
                >Settimana</a
              >
              <a
                href="month.html"
                class="tw:px-3 tw:py-2 tw:text-white/80 tw:text-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10 tw:rounded-t-md"
                >Mese</a
              >
              <a
                href="year.html"
                class="tw:px-3 tw:py-2 tw:text-white/80 tw:text-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10 tw:rounded-t-md"
                >Anno</a
              >
              <a
                href="summary.html"
                class="tw:px-3 tw:py-2 tw:text-white/80 tw:text-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10 tw:rounded-t-md"
                >Storico</a
              >
              <a
                href="vaia.html"
                class="tw:px-3 tw:py-2 tw:text-white/80 tw:text-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10 tw:rounded-t-md"
                >Vaia</a
              >
            </div>
            <!-- Mobile menu button -->
            <div class="tw:md:hidden">
              <button
                class="tw:outline-none mobile-menu-button tw:p-2 tw:rounded-lg hover:tw:bg-white/10 tw:transition-colors"
              >
                <svg
                  class="tw:w-6 tw:h-6 tw:text-white"
                  x-show="!showMenu"
                  fill="none"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
              </button>
            </div>
          </nav>

          <!-- IG e aduepassi -->
          <div class="tw:flex tw:items-center tw:gap-3">
            <a
              href="https://www.instagram.com/meteocentrocadore/?hl=it"
              class="tw:p-2 tw:text-white/80 tw:text-xl tw:transition-colors hover:tw:text-white hover:tw:bg-white/10 tw:rounded-lg"
              ><i class="fab fa-instagram"></i
            ></a>
            <a
              data-umami-event="A due passi"
              href="https://aduepassidallaciclabile.it"
              class="tw:bg-lime-400 tw:text-gray-900 tw:rounded-full tw:px-4 tw:py-2 tw:text-sm tw:font-medium tw:transition-all hover:tw:bg-lime-300 hover:tw:shadow-lg tw:shadow-lime-500/25"
            >
              <i class="fa-brands fa-airbnb tw:mr-1.5"></i> A due passi dalla
              ciclabile
            </a>
          </div>
        </div>

        <!-- Mobile menu -->
        <div
          class="tw:hidden mobile-menu tw:mt-4 tw:pt-4 tw:border-t tw:border-white/20"
        >
          <ul class="tw:space-y-1">
            <li>
              <a
                href="index.html"
                class="tw:block tw:px-3 tw:py-3 tw:text-white tw:text-lg tw:bg-white/10 tw:rounded-lg tw:font-medium"
                >Oggi</a
              >
            </li>
            <li>
              <a
                href="week.html"
                class="tw:block tw:px-3 tw:py-3 tw:text-white/80 tw:text-lg tw:rounded-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10"
                >Settimana</a
              >
            </li>
            <li>
              <a
                href="month.html"
                class="tw:block tw:px-3 tw:py-3 tw:text-white/80 tw:text-lg tw:rounded-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10"
                >Mese</a
              >
            </li>
            <li>
              <a
                href="year.html"
                class="tw:block tw:px-3 tw:py-3 tw:text-white/80 tw:text-lg tw:rounded-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10"
                >Anno</a
              >
            </li>
            <li>
              <a
                href="summary.html"
                class="tw:block tw:px-3 tw:py-3 tw:text-white/80 tw:text-lg tw:rounded-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10"
                >Storico</a
              >
            </li>
            <li>
              <a
                href="vaia.html"
                class="tw:block tw:px-3 tw:py-3 tw:text-white/80 tw:text-lg tw:rounded-lg tw:transition-colors hover:tw:text-white hover:tw:bg-white/10"
                >Vaia</a
              >
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- End header -->
    <main class="tw:mx-4">
      <div class="tw:container tw:mx-auto">
        <p id="freshweather"></p>
          <script>
            window.onload = checkDiff("$current.dateTime ($current.dateTime.format('%Z'))");
          </script>
        <!-- Mqtt -->
        <div class="tw:mb-2 tw:mt-3">
          <div
            class="online-indicator tw:mx-7 tw:mt-1.5 tw:md:ml-0"
            id="indicator"
          >
            <span
              class="tw:w-2 tw:h-2 tw:bg-red-500 tw:rounded-full tw:animate-pulse"
              id="indicator-1"
            ></span>
          </div>
          <span id="mqttStatus" class="tw:inline-block tw:align-middle tw:mb-1"
            >Connessione alla stazione meteo in corso...</span
          >
        </div>

        <section class="tw:mb-8">
          <div class="tw:grid tw:grid-cols-1 tw:lg:grid-cols-2 tw:gap-6">
            <div class="tw:lg:col-span-1">
              <div
                class="tw:grid tw:grid-cols-2 tw:lg:grid-cols-3 tw:gap-2 tw:mb-4"
              >
                <!-- Tempeartura -->
                <div
                  class="tw:bg-weather-cool/6 tw:rounded-2xl tw:p-4 tw:border tw:border-gray-100"
                >
                  <div
                    class="tw:flex tw:items-center tw:justify-between tw:mb-2"
                  >
                    <div class="tw:text-sm tw:text-gray-800">Temperatura</div>
                  </div>
                  <div
                    class="tw:text-2xl tw:font-bold tw:text-gray-800 tw:mb-2"
                    id="outTemp"
                  >
                    $current.outTemp
                  </div>
                  <div class="tw:text-s tw:text-gray-500 tw:mb-2">
                    Percepita:
                    <span class="" id="heatIndex"
                      >$current.appTemp</span
                    >
                  </div>
                  <div class="tw:text-xs tw:text-gray-500 tw:space-y-1">
                    <div>
                      Max:
                      <span class="tw:font-medium"
                        >$day.outTemp.max</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.outTemp.maxtime.format("%H:%M"))</span
                      >
                    </div>
                    <div>
                      Min:
                      <span class="tw:font-medium"
                        >$day.outTemp.min</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.outTemp.mintime.format("%H:%M"))</span
                      >
                    </div>
                  </div>
                </div>
                <!-- umidità -->
                <div
                  class="tw:bg-weather-cool/6 tw:rounded-2xl tw:p-4 tw:border tw:border-gray-100"
                >
                  <div
                    class="tw:flex tw:items-center tw:justify-between tw:mb-2"
                  >
                    <div class="tw:text-sm tw:text-gray-800">Umidità</div>
                  </div>
                  <div
                    class="tw:text-2xl tw:font-bold tw:text-gray-800 tw:mb-2"
                    id="outHum"
                  >
                    $current.outHumidity
                  </div>
                  <div class="tw:text-xs tw:text-gray-500 tw:space-y-1">
                    <div>
                      Max:
                      <span class="tw:font-medium"
                        >$day.outHumidity.max</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.outHumidity.maxtime.format("%H:%M"))</span
                      >
                    </div>
                    <div>
                      Min:
                      <span class="tw:font-medium"
                        >$day.outHumidity.min</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.outHumidity.mintime.format("%H:%M"))</span
                      >
                    </div>
                  </div>
                </div>

                <!-- Pressione -->
                <div
                  class="tw:bg-weather-cool/6 tw:rounded-2xl tw:p-4 tw:border tw:border-gray-100"
                >
                  <div
                    class="tw:flex tw:items-center tw:justify-between tw:mb-2"
                  >
                    <div class="tw:text-sm tw:text-gray-800">Pressione</div>
                  </div>
                  <div
                    class="tw:text-2xl tw:font-bold tw:text-gray-800"
                    id="pressure"
                  >
                    $current.barometer
                  </div>
                  <div class="tw:text-xs tw:text-gray-500 tw:space-y-1">
                    <div>
                      Max:
                      <span class="tw:font-medium"
                        >$day.barometer.max</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.barometer.maxtime.format("%H:%M"))</span
                      >
                    </div>
                    <div>
                      Min:
                      <span class="tw:font-medium"
                        >$day.barometer.min</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.barometer.mintime.format("%H:%M"))</span
                      >
                    </div>
                  </div>
                </div>

                <!-- Vento -->
                <div
                  class="tw:bg-weather-cool/6 tw:rounded-2xl tw:p-4 tw:border tw:border-gray-100"
                >
                  <div
                    class="tw:flex tw:items-center tw:justify-between tw:mb-2"
                  >
                    <div class="tw:text-sm tw:text-gray-800">Vento</div>
                  </div>
                  <div
                    class="tw:text-2xl tw:font-bold tw:text-grey-800"
                    id="windSpeed"
                  >
                    $current.windSpeed
                  </div>
                  <div class="tw:text-xs tw:text-gray-500 tw:space-y-1">
                    <div>
                      $current.windDir.ordinal_compass
                    </div>
                    <div>
                      Max:
                      <span class="tw:font-medium"
                        >$day.windGust.max</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.windGust.maxtime.format("%H:%M"))</span
                      >
                    </div>
                    <div>
                      Avg:
                      <span class="tw:font-medium"
                        >$day.windSpeed.avg</span
                      >
                    </div>
                  </div>
                </div>
                <!-- pioggia -->
                <div
                  class="tw:bg-weather-cool/6 tw:rounded-2xl tw:p-4 tw:border tw:border-gray-100"
                >
                  <div
                    class="tw:flex tw:items-center tw:justify-between tw:mb-2"
                  >
                    <div class="tw:text-sm tw:text-gray-800">Pioggia</div>
                  </div>
                  <div
                    class="tw:text-2xl tw:font-bold tw:text-grey-800"
                    id="rain"
                  >
                    $day.rain.sum
                  </div>
                  <div class="tw:text-xs tw:text-gray-500 tw:space-y-1">
                    <div>
                      Rain rate:
                      <span class="tw:font-medium" id="rainRate"
                        >$current.rainRate</span
                      >
                    </div>
                    <div>
                      Rain rate max:
                      <span class="tw:font-medium"
                        >$day.rainRate.max</span
                      >
                    </div>
                  </div>
                </div>

                <!-- Dew Point -->
                <div
                  class="tw:bg-weather-cool/6 tw:rounded-2xl tw:p-4 tw:border tw:border-gray-100"
                >
                  <div
                    class="tw:flex tw:items-center tw:justify-between tw:mb-2"
                  >
                    <div class="tw:text-sm tw:text-gray-800">
                      Punto di rugiada
                    </div>
                    <span class="tw:relative tw:ml-2 tw:group">
                      <i
                        class="fas fa-question-circle tw:text-gray-600 tw:cursor-pointer"
                        tabindex="0"
                        aria-label="Informazioni sul punto di rugiada"
                      ></i>
                      <span
                        class="tw:absolute tw:w-56 tw:bg-gray-800 tw:text-white tw:text-center tw:rounded tw:py-2 tw:px-3 tw:bottom-full tw:left-1/2 tw:transform tw:-translate-x-1/2 tw:mb-2 tw:opacity-0 tw:group-hover:opacity-100 tw:group-focus-within:opacity-100 tw:transition-opacity tw:duration-300 tw:pointer-events-none"
                      >
                        Temperatura alla quale l'aria deve raffreddarsi affinché
                        il vapore acqueo presente inizi a condensare.
                      </span>
                    </span>
                  </div>
                  <div
                    class="tw:text-2xl tw:font-bold tw:text-grey-800"
                    id="dewPoint"
                  >
                    $current.dewpoint
                  </div>
                  <div class="tw:text-xs tw:text-gray-500 tw:space-y-1">
                    <div>
                      Max:
                      <span class="tw:font-medium"
                        >$day.dewpoint.max</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.dewpoint.maxtime.format("%H:%M"))</span
                      >
                    </div>
                    <div>
                      Min:
                      <span class="tw:font-medium"
                        >$day.dewpoint.min</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.dewpoint.mintime.format("%H:%M"))</span
                      >
                    </div>
                  </div>
                </div>

                <!-- Wind Chill -->
                <div
                  class="tw:bg-weather-cool/6 tw:rounded-2xl tw:p-4 tw:border tw:border-gray-100"
                >
                  <div
                    class="tw:flex tw:items-center tw:justify-between tw:mb-2"
                  >
                    <div class="tw:text-sm tw:text-gray-800">Wind Chill</div>
                    <span class="tw:relative tw:ml-2 tw:group">
                      <i
                        class="fas fa-question-circle tw:text-gray-600 tw:cursor-pointer"
                        tabindex="0"
                        aria-label="Informazioni sul punto di rugiada"
                      ></i>
                      <span
                        class="tw:absolute tw:w-56 tw:bg-gray-800 tw:text-white tw:text-center tw:rounded tw:py-2 tw:px-3 tw:bottom-full tw:left-1/2 tw:transform tw:-translate-x-1/2 tw:mb-2 tw:opacity-0 tw:group-hover:opacity-100 tw:group-focus-within:opacity-100 tw:transition-opacity tw:duration-300 tw:pointer-events-none"
                      >
                        Temperatura percepita per effetto del vento sulla pelle.
                      </span>
                    </span>
                  </div>
                  <div
                    class="tw:text-2xl tw:font-bold tw:text-grey-800"
                    id="windChill"
                  >
                    $current.windchill
                  </div>
                  <div class="tw:text-xs tw:text-gray-500 tw:space-y-1">
                    <div>
                      Max:
                      <span class="tw:font-medium"
                        >$day.windchill.max</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.windchill.maxtime.format("%H:%M"))</span
                      >
                    </div>
                    <div>
                      Min:
                      <span class="tw:font-medium"
                        >$day.windchill.min</span
                      >
                      <span class="tw:text-gray-400"
                        >($day.windchill.mintime.format("%H:%M"))</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- webcam -->
            <div class="tw:lg:col-span-1">
              <div
                class="tw:bg-gradient-to-br tw:from-weather-cool/10 tw:to-weather-warm/10 tw:rounded-2xl tw:p-4 tw:flex tw:flex-col"
              >
                <!-- Radio buttons prima del container -->
                <input
                  type="radio"
                  id="webcam"
                  name="weather-view"
                  style="display: none"
                  checked
                />
                <input
                  type="radio"
                  id="radar"
                  name="weather-view"
                  style="display: none"
                />

                <div class="weather-container">
                  <div class="tw:lg:col-span-1">
                    <div class="">
                      <!-- Navigazione -->
                      <div class="tw:mb-3 tw:flex tw:justify-center">
                        <div
                          class="tw:bg-white/20 tw:rounded-lg tw:p-1 tw:flex tw:gap-1"
                        >
                          <label
                            for="webcam"
                            class="webcam-btn tw:px-3 tw:py-1 tw:rounded tw:text-sm tw:font-medium tw:transition-colors tw:cursor-pointer tw:hover:bg-white/20 tw:bg-white/30 tw:text-gray-800"
                          >
                            📹 Webcam
                          </label>
                          <label
                            for="radar"
                            class="radar-btn tw:px-3 tw:py-1 tw:rounded tw:text-sm tw:font-medium tw:transition-colors tw:cursor-pointer tw:hover:bg-white/20 tw:text-gray-600"
                          >
                            🌦️ Radar
                          </label>
                        </div>
                      </div>

                      <!-- Immagini -->
                      <div class="tw:flex-1 tw:overflow-hidden">
                        <img
                          class="webcam-image tw:w-full tw:object-cover tw:block tw:rounded-xl"
                          src="https://www.meteocentrocadore.it/webcam/webcam.jpg?$current.dateTime.raw"
                          alt="Live weather camera"
                        />
                        <img
                          class="radar-image tw:w-full tw:object-contain tw:hidden tw:lg:max-h-[25vw] tw:rounded-xl"
                          src="https://meteo.arpa.veneto.it/meteo/radar/imgs/concordia/1_BASE.jpg?$current.dateTime.raw"
                          alt="Weather radar"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <div class="tw:grid tw:grid-cols-1 tw:lg:grid-cols-3 tw:gap-6">
            <div
              class="tw:md:col-span-1 tw:bg-weather-cool/6 tw:rounded-2xl tw:border tw:border-gray-100"
            >
              <!-- One year ago -->
              <!--Leap Year Code -->
              <!-- prettier-ignore -->
              #set $yr = int($day.dateTime.format("%Y"))%4
            #if $yr == 0
              #if $yr % 100 == 0
                #if $yr % 400 == 0
                  #if $day.dateTime.format("%d-%b") == '29-Feb'
                    #set $n = 1461
                  #else if $day.dateTime.format("%d-%b") >= '01-Mar'
                    #set $n = 366
                  #else
                    #set $n = 365
                  #end if
                #else
                  #set $n = 365
                #end if
              #else
                #if $day.dateTime.format("%d-%b") == '29-Feb'
                  #set $n = 1461
                #else if $day.dateTime.format("%d-%b") >= '01-Mar'
                  #set $n = 366
                #else
                  #set $n = 365
                #end if
              #end if
            #else
              #set $yrNew = ($yr - 1)
            #if $yrNew % 100 == 0
              #if $yrNew % 400 == 0
                #if $day.dateTime.format("%d-%b") < '01-Mar'
                  #set $n = 366
                #else
                  #set $n = 365
                #end if
              #end if
              #else
                #set $n = 365
              #end if
            #end if
              <!-- prettier-ignore-end -->
              <h1 class="tw:text-xl tw:text-gray-800 tw:px-4 tw:pt-4">
                Un anno fa ($days_ago($days_ago=$n).dateTime.format("%d-%b(%Y)"))
              </h1>

              <table
                class="tw:w-full tw:table-fixed tw:border-collapse tw:mt-2"
              >
                <tr class="tw:hover:bg-weather-cool/5">
                  <td
                    class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                  >
                    Temperatura massima:
                  </td>
                  <td
                    class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                  >
                    $days_ago($days_ago=$n).outTemp.max
                    $days_ago($days_ago=$n).outTemp.maxtime
                  </td>
                </tr>
                <tr class="tw:hover:bg-weather-cool/5">
                  <td
                    class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                  >
                    Temperatura minima:
                  </td>
                  <td
                    class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                  >
                    $days_ago($days_ago=$n).outTemp.min
                    $days_ago($days_ago=$n).outTemp.mintime
                  </td>
                </tr>
                <tr class="tw:hover:bg-weather-cool/5">
                  <td
                    class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                  >
                    Umidità massima:
                  </td>
                  <td
                    class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                  >
                    $days_ago($days_ago=$n).outHumidity.max
                    $days_ago($days_ago=$n).outHumidity.maxtime
                  </td>
                </tr>
                <tr class="tw:hover:bg-weather-cool/5">
                  <td
                    class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                  >
                    Umidità minima:
                  </td>
                  <td
                    class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                  >
                    $days_ago($days_ago=$n).outHumidity.min
                    $days_ago($days_ago=$n).outHumidity.mintime
                  </td>
                </tr>
                <tr class="tw:hover:bg-weather-cool/5">
                  <td
                    class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                  >
                    Pressione massima:
                  </td>
                  <td
                    class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                  >
                    $days_ago($days_ago=$n).barometer.max
                    $days_ago($days_ago=$n).barometer.maxtime
                  </td>
                </tr>
                <tr class="tw:hover:bg-weather-cool/5">
                  <td
                    class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                  >
                    Pressione minima:
                  </td>
                  <td
                    class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                  >
                    $days_ago($days_ago=$n).barometer.min
                    $days_ago($days_ago=$n).barometer.mintime
                  </td>
                </tr>
                <tr class="tw:hover:bg-weather-cool/5">
                  <td
                    class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                  >
                    Pioggia:
                  </td>
                  <td
                    class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                  >
                    $days_ago($days_ago=$n).rain.sum
                  </td>
                </tr>
                <tr class="tw:hover:bg-weather-cool/5">
                  <td
                    class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                  >
                    Rain Rate max:
                  </td>
                  <td
                    class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                  >
                    $days_ago($days_ago=$n).rainRate.max
                    $days_ago($days_ago=$n).rainRate.maxtime
                  </td>
                </tr>
                <tr class="tw:hover:bg-weather-cool/5 tw:group">
                  <td
                    class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:pl-4 tw:group-hover:rounded-bl-2xl"
                  >
                    Vento massimo:
                  </td>
                  <td
                    class="tw:py-2 tw:text-gray-900 tw:group-hover:rounded-br-2xl"
                  >
                    $days_ago($days_ago=$n).wind.max $day.wind.gustdir
                    $days_ago($days_ago=$n).wind.maxtime
                  </td>
                </tr>
              </table>
            </div>

            <!-- Almanac -->
            <div
              class="tw:lg:col-span-2 tw:bg-weather-cool/6 tw:rounded-2xl tw:border tw:border-gray-100"
            >
              <!-- prettier-ignore -->
              #set $sun_altitude = $almanac.sun.alt
              #if $sun_altitude < 0
              #set $sun_None="<i>(Always down)</i>" 
              #else 
              #set $sun_None="<i>(Always up)</i>" 
              #end if
              <!-- prettier-ignore-end -->

              <h1 class="tw:text-xl tw:px-4 tw:pt-4">Almanacco</h1>
              <div class="tw:grid tw:grid-cols-1 tw:lg:grid-cols-2 tw:gap-2">
                <div>
                  <h1 class="tw:text-xl tw:text-gray-800 tw:px-4 tw:pt-4">
                    Sole
                  </h1>

                  <table
                    class="tw:w-full tw:table-fixed tw:border-collapse tw:mt-2"
                  >
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Inizio crepuscolo civile:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac(horizon=-6).sun(use_center=1).rise
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Alba:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.sun.rise.string($sun_None)
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Transito:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.sun.transit
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Tramonto:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.sun.set.string($sun_None)
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Fine crepuscolo civile:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac(horizon=-6).sun(use_center=1).set
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Azimuth:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $("%.1f&deg;" % $almanac.sun.az)
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Altitudine:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $("%.1f&deg;" % $sun_altitude)
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Ascensione retta:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $("%.1f&deg;" % $almanac.sun.ra)
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Inclinazione:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $("%.1f&deg;" % $almanac.sun.dec)
                      </td>
                    </tr>
                    #if $almanac.next_equinox.raw > $almanac.next_solstice.raw
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Solstizio:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.next_solstice
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Equinozio:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.next_equinox
                      </td>
                    </tr>
                    #else
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Equinozio:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.next_equinox
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5 tw:group">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:pl-4 tw:group-hover:rounded-bl-2xl"
                      >
                        Solstizio:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:group-hover:rounded-br-2xl"
                      >
                        $almanac.next_solstice
                      </td>
                    </tr>
                    #end if
                  </table>
                </div>

                <div>
                  <h1 class="tw:text-xl tw:text-gray-800 tw:px-4 tw:pt-4">
                    Luna
                  </h1>

                  <table
                    class="tw:w-full tw:table-fixed tw:border-collapse tw:mt-2"
                  >
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Leva:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.moon.rise
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Transito:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.moon.transit
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Cala:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.moon.set
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Azimut:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $("%.1f&deg;" % $almanac.moon.az)
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Altitudine:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $("%.1f&deg;" % $almanac.moon.alt)
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Ascensione retta:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $("%.1f&deg;" % $almanac.moon.ra)
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Inclinazione:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $("%.1f&deg;" % $almanac.moon.dec)
                      </td>
                    </tr>
                    #if $almanac.next_full_moon.raw < $almanac.next_new_moon.raw
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Luna piena:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.next_full_moon
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Luna nuova:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.next_new_moon
                      </td>
                    </tr>
                    #else
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Luna nuova:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.next_new_moon
                      </td>
                    </tr>
                    <tr class="tw:hover:bg-weather-cool/5">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:border-b tw:border-gray-200 tw:pl-4"
                      >
                        Luna piena:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:border-b tw:border-gray-200"
                      >
                        $almanac.next_full_moon
                      </td>
                    </tr>
                    #end if
                    <tr class="tw:hover:bg-weather-cool/5 tw:group">
                      <td
                        class="tw:pr-10 tw:py-2 tw:font-medium tw:text-gray-900 tw:pl-4 tw:group-hover:rounded-bl-2xl"
                      >
                        Fase:
                      </td>
                      <td
                        class="tw:py-2 tw:text-gray-900 tw:group-hover:rounded-br-2xl"
                      >
                        $almanac.moon_phase ($almanac.moon_fullness% full)
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </section>

        <hr class="tw:h-px tw:mt-4 tw:mb-8 tw:bg-blue-200 tw:border-0" />

        <!-- Grafici -->
        <div class="tw:p-8 tw:md:p-0 tw:mb-4">
          <h1 class="tw:text-xl">
            <i class="fa fa-line-chart m-gruen"></i> Grafici
          </h1>
          <div class="tw:grid tw:grid-cols-1 tw:md:grid-cols-2">
            <div id="outTempChart" class="tw:h-[40vh]"></div>
            <div id="rainChart" class="tw:h-[40vh]"></div>
            <div id="windChart" class="tw:h-[40vh]"></div>
            <div id="windDirChart" class="tw:h-[40vh]"></div>
            <div id="heatIndexChart" class="tw:h-[40vh]"></div>
            <div id="barometerChart" class="tw:h-[40vh]"></div>
          </div>
        </div>
      </div>
    </main>
    <!-- Footer -->
    <footer class="tw:bg-weather-cool/80 tw:p-8 tw:text-white">
      <div class="tw:container tw:mx-auto">
        <div class="tw:table">
          <div class="tw:table-row">
            <div class="tw:table-cell tw:pr-2">Stazione:</div>
            <div class="tw:table-cell tw:pr-2">$station.hardware</div>
          </div>
          <div class="tw:table-row">
            <div class="tw:table-cell tw:pr-2">Software:</div>
            <div class="tw:table-cell tw:pr-2">WeeWX v$station.version</div>
          </div>
          <div class="tw:table-row">
            <div class="tw:table-cell tw:pr-2">Weewx uptime:</div>
            <div class="tw:table-cell tw:pr-2">$station.uptime.long_form</div>
          </div>
          <div class="tw:table-row">
            <div class="tw:table-cell tw:pr-2">Server uptime:</div>
            <div class="tw:table-cell tw:pr-2">
              $station.os_uptime.long_form
            </div>
          </div>
        </div>
        <hr class="tw:h-px tw:my-4 tw:bg-blue-200 tw:border-0" />
        <div class="tw:flex tw:flex-row tw:flex-wrap">
          <p class="tw:mr-2">
            Powered by <a href="weewx.com" class="tw:underline">Weewx</a>.
          </p>
          <p class="tw:mr-2">|</p>
          <p class="tw:mr-2">
            Non prendere decisioni importanti con le informazioni di questo
            sito.
          </p>
          <p class="tw:mr-2">|</p>
          <p class="tw:mr-2">
            © $latest.dateTime.format("%Y") meteocentrocadore.
          </p>
          <p class="tw:mr-2">|</p>
          <p class="tw:mr-2">
            <a href="mailto:meteocentrocadore@gmail.com" class="tw:underline"
              >Contattaci</a
            >
          </p>
          <p class="tw:mr-2">|</p>
          <p class="tw:mr-2">
            <a
              href="https://github.com/NikoFresh/MCC-sofaskin"
              class="tw:underline"
            >
              <i class="fa-brands fa-github"></i> GitHub
            </a>
          </p>
        </div>
      </div>
    </footer>
    <!-- End footer-->
    <script>
      const btn = document.querySelector("button.mobile-menu-button");
      const menu = document.querySelector(".mobile-menu");

      btn.addEventListener("click", () => {
        menu.classList.toggle("tw:hidden");
      });
    </script>
    <script src="./js/eplot.js?v1.3"></script>
  </body>
</html>
